{"config":{"lang":["en"],"separator":"[\\s\\-]+","pipeline":["stopWordFilter"]},"docs":[{"location":"","title":"Introduction to tfswitch","text":"<p>The <code>tfswitch</code> command line tool lets you switch between different versions of terraform. If you do not have a particular version of terraform installed, <code>tfswitch</code> lets you download the version you desire. The installation is minimal and easy.  Once installed, simply select the version you require from the dropdown and start using terraform. </p>"},{"location":"Continuous-Integration/","title":"Continuous Integration","text":""},{"location":"Continuous-Integration/#jenkins-setup","title":"Jenkins setup","text":"<pre><code>#!/bin/bash \n\necho \"Installing tfswitch locally\"\nwget https://raw.githubusercontent.com/warrensbox/terraform-switcher/release/install.sh  #Get the installer on to your machine\n\nchmod 755 install.sh #Make installer executable\n\n./install.sh -b `pwd`/.bin      #Install tfswitch in a location you have permission\n\nCUSTOMBIN=`pwd`/.bin            #set custom bin path\n\nexport PATH=$PATH:$CUSTOMBIN    #Add custom bin path to PATH environment\n\n$CUSTOMBIN/tfswitch -b $CUSTOMBIN/terraform 0.11.7 #or simply tfswitch -b $CUSTOMBIN/terraform 0.11.7\n\n#OR \n$CUSTOMBIN/tfswitch -d 0.11.7 -b $CUSTOMBIN/terraform  #or simply tfswitch -d 0.11.7 -b $CUSTOMBIN/terraform \n\nterraform -v                    #testing version\n</code></pre>"},{"location":"Continuous-Integration/#circle-ci-setup","title":"Circle CI setup","text":"<p>Example config yaml</p> <pre><code>version: 2\njobs:\n  build:\n    docker:\n      - image: ubuntu\n\n    working_directory: /go/src/github.com/warrensbox/terraform-switcher\n\n    steps:\n      - checkout\n      - run: \n          command: |    \n            set +e   \n            apt-get update \n            apt-get install -y wget \n            rm -rf /var/lib/apt/lists/*\n\n            echo \"Installing tfswitch locally\"\n\n            wget https://raw.githubusercontent.com/warrensbox/terraform-switcher/release/install.sh  #Get the installer on to your machine\n\n            chmod 755 install.sh            #Make installer executable\n\n            ./install.sh -b `pwd`/.bin      #Install tfswitch in a location you have permission\n\n            CUSTOMBIN=`pwd`/.bin            #set custom bin path\n\n            export PATH=$PATH:$CUSTOMBIN    #Add custom bin path to PATH environment\n\n            $CUSTOMBIN/tfswitch -b $CUSTOMBIN/terraform 0.11.7 #or simply tfswitch -b $CUSTOMBIN/terraform 0.11.7\n\n            #OR \n            $CUSTOMBIN/tfswitch -d 0.11.7 -b $CUSTOMBIN/terraform  #or simply tfswitch -d 0.11.7 -b $CUSTOMBIN/terraform \n\n            terraform -v                    #testing version\n</code></pre>"},{"location":"How-to-Contribute/","title":"How to Contribute","text":""},{"location":"How-to-Contribute/#step-by-step-instructions","title":"Step by step instructions","text":"<p>An open source project becomes meaningful when people collaborate to improve the code. </p> <p>Feel free to look at the code, critique and make suggestions. Lets make <code>tfswitch</code> better!</p>"},{"location":"How-to-Contribute/#required-version","title":"Required version","text":"<pre><code>go version 1.13\n</code></pre>"},{"location":"How-to-Contribute/#step-1-create-workspace","title":"Step 1 - Create workspace","text":"<p>Skip this step if you already have a github go workspace  Create a github workspace.  </p>"},{"location":"How-to-Contribute/#step-2-set-gopath","title":"Step 2 - Set GOPATH","text":"<p>Skip this step if you already have a github go workspace  Export your GOPATH environment variable in your <code>go</code> directory.   </p> <pre><code>export GOPATH=`pwd`\n</code></pre> <p> </p>"},{"location":"How-to-Contribute/#step-3-clone-repository","title":"Step 3 - Clone repository","text":"<p>Git clone this repository.  </p> <pre><code>git clone git@github.com:warrensbox/terraform-switcher.git\n</code></pre> <p> </p>"},{"location":"How-to-Contribute/#step-4-get-dependencies","title":"Step 4 - Get dependencies","text":"<p>Go get all the dependencies.   </p> <pre><code>go mod download\n</code></pre> <pre><code>go get -v -t -d ./...\n</code></pre> <p>Test the code (optional).</p> <pre><code>go vet -tests=false ./...\n</code></pre> <pre><code>go test -v ./...\n</code></pre> <p> </p>"},{"location":"How-to-Contribute/#step-5-build-executable","title":"Step 5 - Build executable","text":"<p>Create a new branch.   </p> <pre><code>git checkout -b feature/put-your-branch-name-here\n</code></pre> <p>Refactor and add new features to the code. Go build the code.   </p> <pre><code>go build -o test-tfswitch\n</code></pre> <p>Test the code and create a new pull request!</p> <p> </p>"},{"location":"How-to-Contribute/#contributors","title":"Contributors","text":""},{"location":"Install/","title":"Install","text":""},{"location":"Install/#installation","title":"Installation","text":"<p><code>tfswitch</code> is available for MacOS and Linux based operating systems.</p>"},{"location":"Install/#homebrew","title":"Homebrew","text":"<p>Installation for MacOS is the easiest with Homebrew. If you do not have homebrew installed, click here.</p> <pre><code>brew install warrensbox/tap/tfswitch\n</code></pre>"},{"location":"Install/#linux","title":"Linux","text":"<p>Installation for Linux operation systems.</p> <pre><code>curl -L https://raw.githubusercontent.com/warrensbox/terraform-switcher/release/install.sh | bash\n</code></pre>"},{"location":"Install/#arch-user-repository-aur-packages-for-arch-linux","title":"Arch User Repository (AUR) packages for Arch Linux","text":"<pre><code># compiled from source\nyay tfswitch\n\n# precompiled\nyay tfswitch-bin\n</code></pre>"},{"location":"Install/#install-from-source","title":"Install from source","text":"<p>Alternatively, you can install the binary from the source here.</p> <p>Having trouble installing.</p>"},{"location":"Quick-Start/","title":"Quick Start","text":""},{"location":"Quick-Start/#how-to-use","title":"How to use:","text":""},{"location":"Quick-Start/#use-dropdown-menu-to-select-version","title":"Use dropdown menu to select version","text":"<ol> <li>You can switch between different versions of terraform by typing the command <code>tfswitch</code> on your terminal.</li> <li>Select the version of terraform you require by using the up and down arrow.</li> <li>Hit Enter to select the desired version.</li> </ol> <p>The most recently selected versions are presented at the top of the dropdown.</p>"},{"location":"Quick-Start/#supply-version-on-command-line","title":"Supply version on command line","text":"<ol> <li>You can also supply the desired version as an argument on the command line.</li> <li>For example, <code>tfswitch 0.10.5</code> for version 0.10.5 of terraform.</li> <li>Hit Enter to switch.</li> </ol>"},{"location":"Quick-Start/#see-all-versions-including-beta-alpha-and-release-candidatesrc","title":"See all versions including beta, alpha and release candidates(rc)","text":"<ol> <li>Display all versions including beta, alpha and release candidates(rc). </li> <li>For example, <code>tfswitch -l</code> or <code>tfswitch --list-all</code> to see all versions.</li> <li>Hit Enter to select the desired version.</li> </ol>"},{"location":"Quick-Start/#use-environment-variables","title":"Use environment variables","text":"<p>You can also set the <code>TF_VERSION</code> environment variable to your desired terraform version.  For example:   </p> <pre><code>export TF_VERSION=0.14.4\ntfswitch #will automatically switch to terraform version 0.14.4\n</code></pre>"},{"location":"Quick-Start/#install-latest-version-only","title":"Install latest version only","text":"<ol> <li>Install the latest stable version only.</li> <li>Run <code>tfswitch -u</code> or <code>tfswitch --latest</code>.</li> <li>Hit Enter to install.</li> </ol>"},{"location":"Quick-Start/#install-latest-implicit-version-for-stable-releases","title":"Install latest implicit version for stable releases","text":"<ol> <li>Install the latest implicit stable version.</li> <li>Ex: <code>tfswitch -s 0.13</code> or <code>tfswitch --latest-stable 0.13</code> downloads 0.13.6 (latest) version.</li> <li>Hit Enter to install.</li> </ol>"},{"location":"Quick-Start/#install-latest-implicit-version-for-beta-alpha-and-release-candidatesrc","title":"Install latest implicit version for beta, alpha and release candidates(rc)","text":"<ol> <li>Install the latest implicit pre-release version.</li> <li>Ex: <code>tfswitch -p 0.13</code> or <code>tfswitch --latest-pre 0.13</code> downloads 0.13.0-rc1 (latest) version.</li> <li>Hit Enter to install.</li> </ol>"},{"location":"Quick-Start/#show-latest-version-only","title":"Show latest version only","text":"<ol> <li>Just show what the latest version is.</li> <li>Run <code>tfswitch -U</code> or <code>tfswitch --show-latest</code></li> <li>Hit Enter to show.</li> </ol>"},{"location":"Quick-Start/#show-latest-implicit-version-for-stable-releases","title":"Show latest implicit version for stable releases","text":"<ol> <li>Show the latest implicit stable version.</li> <li>Ex: <code>tfswitch -S 0.13</code> or <code>tfswitch --show-latest-stable 0.13</code> shows 0.13.6 (latest) version.</li> <li>Hit Enter to show.</li> </ol>"},{"location":"Quick-Start/#show-latest-implicit-version-for-beta-alpha-and-release-candidatesrc","title":"Show latest implicit version for beta, alpha and release candidates(rc)","text":"<ol> <li>Show the latest implicit pre-release version.</li> <li>Ex: <code>tfswitch -P 0.13</code> or <code>tfswitch --show-latest-pre 0.13</code> shows 0.13.0-rc1 (latest) version.</li> <li>Hit Enter to show.</li> </ol>"},{"location":"Quick-Start/#use-versiontf-file","title":"Use version.tf file","text":"<p>If a .tf file with the terraform constrain is included in the current directory, it should automatically download or switch to that terraform version. For example, the following should automatically switch terraform to the lastest version:     </p> <pre><code>terraform {\n  required_version = \"&gt;= 0.12.9\"\n\n  required_providers {\n    aws        = \"&gt;= 2.52.0\"\n    kubernetes = \"&gt;= 1.11.1\"\n  }\n}\n</code></pre> <p></p>"},{"location":"Quick-Start/#use-tfswitchtoml-file-for-non-admin-users-with-limited-privilege-on-their-computers","title":"Use .tfswitch.toml file  (For non-admin - users with limited privilege on their computers)","text":"<p>This is similiar to using a .tfswitchrc file, but you can specify a custom binary path for your terraform installation</p> <p> </p> <ol> <li>Create a custom binary path. Ex: <code>mkdir /Users/warrenveerasingam/bin</code> (replace warrenveerasingam with your username)</li> <li>Add the path to your PATH. Ex: <code>export PATH=$PATH:/Users/warrenveerasingam/bin</code> (add this to your bash profile or zsh profile)</li> <li>Pass -b or --bin parameter with your custom path to install terraform. Ex: <code>tfswitch -b /Users/warrenveerasingam/bin/terraform 0.10.8</code></li> <li>Optionally, you can create a <code>.tfswitch.toml</code> file in your terraform directory(current directory) OR in your home directory(~/.tfswitch.toml). The toml file in the current directory has a higher precedence than toml file in the home directory</li> <li>Your <code>.tfswitch.toml</code> file should look like this:</li> </ol> <pre><code>bin = \"/Users/warrenveerasingam/bin/terraform\"\nversion = \"0.11.3\"\n</code></pre> <ol> <li>Run <code>tfswitch</code> and it should automatically install the required terraform version in the specified binary path</li> </ol> <p>NOTE  1. For linux users that do not have write permission to <code>/usr/local/bin/</code>, <code>tfswitch</code> will attempt to install terraform at <code>$HOME/bin</code>. Run <code>export PATH=$PATH:$HOME/bin</code> to append bin to PATH 2. For windows host, <code>tfswitch</code> need to be run under <code>Administrator</code> mode, and <code>$HOME/.tfswitch.toml</code> with <code>bin</code> must be defined (with a valid path) as minimum, below is an example for <code>$HOME/.tfswitch.toml</code> on windows</p> <pre><code>bin = \"C:\\\\Users\\\\&lt;%USRNAME%&gt;\\\\bin\\\\terraform.exe\"\n</code></pre>"},{"location":"Quick-Start/#use-tfswitchrc-file","title":"Use .tfswitchrc file","text":"<ol> <li>Create a <code>.tfswitchrc</code> file containing the desired version</li> <li>For example, <code>echo \"0.10.5\" &gt;&gt; .tfswitchrc</code> for version 0.10.5 of terraform</li> <li>Run the command <code>tfswitch</code> in the same directory as your <code>.tfswitchrc</code></li> </ol> <p>Instead of a <code>.tfswitchrc</code> file, a <code>.terraform-version</code> file may be used for compatibility with <code>tfenv</code> and other tools which use it</p>"},{"location":"Quick-Start/#use-terragrunthcl-file","title":"Use terragrunt.hcl file","text":"<p>If a terragrunt.hcl file with the terraform constrain is included in the current directory, it should automatically download or switch to that terraform version. For example, the following should automatically switch terraform to the lastest version 0.13:     </p> <pre><code>terragrunt_version_constraint = \"&gt;= 0.26, &lt; 0.27\"\nterraform_version_constraint  = \"&gt;= 0.13, &lt; 0.14\"\n...\n</code></pre>"},{"location":"Quick-Start/#get-the-version-from-a-subdirectory","title":"Get the version from a subdirectory","text":"<pre><code>tfswitch --chdir terraform_dir\ntfswitch -c terraform_dir\n</code></pre>"},{"location":"Quick-Start/#use-custom-mirror","title":"Use custom mirror","text":"<p>To install from a remote mirror other than the default(https://releases.hashicorp.com/terraform). Use the <code>-m</code> or <code>--mirror</code> parameter.   Ex: <code>tfswitch --mirror https://example.jfrog.io/artifactory/hashicorp</code></p>"},{"location":"Quick-Start/#set-a-default-tf-version-for-cicd-pipeline","title":"Set a default TF version for CICD pipeline","text":"<ol> <li>When using a CICD pipeline, you may want a default or fallback version to avoid the pipeline from hanging.</li> <li>Ex: <code>tfswitch -d 1.2.3</code> or <code>tfswitch --default 1.2.3</code> installs version <code>1.2.3</code> when no other versions could be detected. Also, see CICD example</li> </ol> <p>Automatically switch with bash</p> <p>Add the following to the end of your <code>~/.bashrc</code> file: (Use either <code>.tfswitchrc</code> or <code>.tfswitch.toml</code> or <code>.terraform-version</code>)</p> <pre><code>cdtfswitch(){\n  builtin cd \"$@\";\n  cdir=$PWD;\n  if [ -e \"$cdir/.tfswitchrc\" ]; then\n    tfswitch\n  fi\n}\nalias cd='cdtfswitch'\n</code></pre> <p>Automatically switch with zsh</p> <p>Add the following to the end of your <code>~/.zshrc</code> file:</p> <pre><code>load-tfswitch() {\n  local tfswitchrc_path=\".tfswitchrc\"\n\n  if [ -f \"$tfswitchrc_path\" ]; then\n    tfswitch\n  fi\n}\nadd-zsh-hook chpwd load-tfswitch\nload-tfswitch\n</code></pre> <p>NOTE: if you see an error like this: <code>command not found: add-zsh-hook</code>, then you might be on an older version of zsh (see below), or you simply need to load <code>add-zsh-hook</code> by adding this to your <code>.zshrc</code>:    <code>autoload -U add-zsh-hook</code></p> <p>older version of zsh</p> <pre><code>cd(){\n  builtin cd \"$@\";\n  cdir=$PWD;\n  if [ -e \"$cdir/.tfswitchrc\" ]; then\n    tfswitch\n  fi\n}\n</code></pre> <p>Automatically switch with fish shell</p> <p>Add the following to the end of your <code>~/.config/fish/config.fish</code> file:</p> <pre><code>function switch_terraform --on-event fish_postexec\n    string match --regex '^cd\\s' \"$argv\" &gt; /dev/null\n    set --local is_command_cd $status\n\n    if test $is_command_cd -eq 0 \n      if count *.tf &gt; /dev/null\n\n        grep -c \"required_version\" *.tf &gt; /dev/null\n        set --local tf_contains_version $status\n\n        if test $tf_contains_version -eq 0      \n            command tfswitch\n        end\n      end\n    end\nend\n</code></pre>"},{"location":"Troubleshoot/","title":"Troubleshoot","text":"<p>Problem:</p> <pre><code>install: can't change permissions of /usr/local/bin: Operation not permitted\n</code></pre> <pre><code>\"Unable to remove symlink. You must have SUDO privileges\"\n</code></pre> <pre><code>\"Unable to create symlink. You must have SUDO privileges\"\n</code></pre> <pre><code>install: cannot create regular file '/usr/local/bin/tfswitch': Permission denied\n</code></pre> <p>Solution: You probably need to have privileges to install tfswitch at /usr/local/bin.</p> <p>Try the following:</p> <pre><code>wget https://raw.githubusercontent.com/warrensbox/terraform-switcher/release/install.sh  #Get the installer on to your machine:\n\nchmod 755 install.sh #Make installer executable\n\n./install.sh -b $HOME/.bin #Install tfswitch in a location you have permission:\n\n$HOME/.bin/tfswitch #test\n\nexport PATH=$PATH:$HOME/.bin #Export your .bin into your path\n\n#You should probably add step 4 in your `.bash_profile` in your $HOME directory.\n\n#Next, try:\n`tfswitch -b $HOME/.bin/terraform 0.11.7` \n\n#or simply \n\n`tfswitch -b $HOME/.bin/terraform`\n\n\n</code></pre> <p>See the custom directory option <code>-b</code>:   </p>"},{"location":"Upgrade-or-Uninstall/","title":"Upgrade or Uninstall","text":""},{"location":"Upgrade-or-Uninstall/#upgrade","title":"Upgrade:","text":""},{"location":"Upgrade-or-Uninstall/#homebrew","title":"Homebrew","text":"<pre><code>brew upgrade warrensbox/tap/tfswitch\n</code></pre>"},{"location":"Upgrade-or-Uninstall/#linux","title":"Linux","text":"<p>Rerun:</p> <pre><code>curl -L https://raw.githubusercontent.com/warrensbox/terraform-switcher/release/install.sh | bash\n</code></pre>"},{"location":"Upgrade-or-Uninstall/#uninstall","title":"Uninstall:","text":""},{"location":"Upgrade-or-Uninstall/#homebrew_1","title":"Homebrew","text":"<pre><code>brew uninstall warrensbox/tap/tfswitch\n</code></pre>"},{"location":"Upgrade-or-Uninstall/#linux_1","title":"Linux","text":"<p>Run:</p> <pre><code>rm /usr/local/bin/tfswitch\n</code></pre>"}]}